<div class="container mx-auto px-4 py-8">
  <!-- Brand Header -->
  <div *ngIf="!selectedModel" class="bg-white rounded-lg shadow-sm p-6 mb-8">
    <div class="flex items-center gap-4">
      <img [src]="brandLogo" [alt]="selectedBrand" class="w-16">
      <h1 class="text-lg font-medium">{{selectedBrand | uppercase}} </h1>
    </div>
    <p class="text-sm text-gray-600 mt-2">All Models</p>
  </div>
  <!-- Selected Model Header (shown after model selection) -->
  <div *ngIf="selectedModel" class="bg-white rounded-lg shadow-sm p-4 mb-6">
    <div class="flex items-center justify-between">
      <div class="flex items-center gap-4">
        <img [src]="selectedModelImage" [alt]="selectedModel" class="w-24 h-16 object-contain">
        <img [src]="brandLogo" [alt]="selectedBrand" class="w-16">
        <div>
          <h1 class="text-lg font-medium">{{selectedModel}}</h1>
          <p class="text-sm text-gray-600">{{selectedModelYears}}</p>
        </div>
      </div>
      <div class="flex gap-2">
        <button class="bg-blue-500 text-white px-4 py-2 rounded text-sm">
          Change Vehicle
        </button>
        <button class="bg-gray-200 text-gray-700 px-4 py-2 rounded text-sm">
          Vehicle Details
        </button>
      </div>
    </div>
  </div>
  <!-- Navigation -->
  <div class="mb-6">
    <div class="flex items-center text-sm">
      <button (click)="goBack()" class="text-gray-600 hover:text-[#f85a00] flex items-center">
        <span class="mr-2">‚Üê</span> 
        {{ selectedVariant ? 'Back to Variants' : (selectedModel ? 'Back to Models' : 'Back to Brands') }}
      </button>
      <span class="mx-2 text-gray-400">/</span>
      <span class="text-gray-900 capitalize">{{selectedBrand}}</span>
      <ng-container *ngIf="selectedModel">
        <span class="mx-2 text-gray-400">/</span>
        <span class="text-gray-900">{{selectedModel}}</span>
      </ng-container>
      <ng-container *ngIf="selectedVariant">
        <span class="mx-2 text-gray-400">/</span>
        <span class="text-gray-900">{{selectedVariant.model_variant}}</span>
      </ng-container>
    </div>
  </div>



  <!-- Models Grid (shown first) -->
  <div *ngIf="!selectedModel">
    <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4">
      <ng-container *ngFor="let model of models; let i = index">
        <div *ngIf="i < 10 || showAllModels" 
             (click)="onModelSelect(model.name)"
             class="bg-white rounded-lg shadow hover:shadow-md transition-all duration-300 cursor-pointer">
          <div class="p-3">
            <img [src]="model.image_url" 
                 [alt]="model.name"
                 class="w-full h-24 object-contain">
          </div>
          <div class="p-2 border-t text-center">
            <h3 class="font-medium text-sm">{{model.name}}</h3>
            
          </div>
        </div>
      </ng-container>
    </div>

    <!-- Show More Models Button -->
    <div *ngIf="models.length > 10 && !showAllModels" class="text-center mt-6">
      <button (click)="showAllModels = true" 
              class="bg-blue-500 text-white px-6 py-2 rounded hover:bg-blue-600 transition-colors">
        Show All {{selectedBrand | uppercase}} Models
      </button>
    </div>
  </div>

  <!-- Variants Grid (shown after model selection) -->
  <div *ngIf="selectedModel && !selectedVariant">
    <h2 class="text-xl font-semibold mb-4">{{selectedModel}} Variants</h2>
    <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
      <div *ngFor="let variant of variants" 
           (click)="onVariantSelect(variant)"
           class="bg-white rounded-lg shadow hover:shadow-md transition-all duration-300 cursor-pointer">
        <div class="p-4">
          <img [src]="variant.image_url" 
               [alt]="variant.model_variant"
               class="w-full h-32 object-contain">
        </div>
        <div class="p-3 border-t">
          <h3 class="font-medium text-sm">{{variant.model_variant}}</h3>
          <p class="text-xs text-gray-500 mt-1">{{getYearsFromVariant(variant.model_variant!)}}</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Engine Types Grid (shown after variant selection) -->
  <div *ngIf="selectedVariant">
    <h2 class="text-xl font-semibold mb-4">Available Engine Types</h2>
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
      <div *ngFor="let engine of engineTypes"
           (click)="onEngineSelect(engine)"
           class="bg-white rounded-lg shadow hover:shadow-md transition-all duration-300 cursor-pointer p-4">
        <h3 class="font-medium">{{engine.name}}</h3>
        <p class="text-sm text-gray-600 mt-1">{{engine.power}}</p>
      </div>
    </div>
  </div>
</div>